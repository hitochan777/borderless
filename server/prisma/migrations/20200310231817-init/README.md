# Migration `20200310231817-init`

This migration has been generated by Otsuki Hitoshi at 3/10/2020, 11:18:17 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "quaint"."Repliable" (
    "id" TEXT NOT NULL  ,
    PRIMARY KEY ("id")
)

CREATE TABLE "quaint"."Like" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "id" TEXT NOT NULL  ,
    "repliable" TEXT NOT NULL  ,
    "user" TEXT NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("repliable") REFERENCES "Repliable"("id") ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY ("user") REFERENCES "User"("id") ON DELETE RESTRICT ON UPDATE CASCADE
)

CREATE TABLE "quaint"."User" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "email" TEXT NOT NULL DEFAULT '' ,
    "fluentLanguages" TEXT   ,
    "id" TEXT NOT NULL  ,
    "learningLanguages" TEXT   ,
    "timezone" TEXT NOT NULL DEFAULT '' ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "username" TEXT NOT NULL DEFAULT '' ,
    PRIMARY KEY ("id")
)

CREATE TABLE "quaint"."Post" (
    "content" TEXT NOT NULL DEFAULT '' ,
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "id" TEXT NOT NULL  ,
    "language" TEXT NOT NULL DEFAULT '' ,
    "published" BOOLEAN NOT NULL DEFAULT false ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "user" TEXT NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("user") REFERENCES "User"("id") ON DELETE RESTRICT ON UPDATE CASCADE
)

CREATE TABLE "quaint"."Tweet" (
    "content" TEXT NOT NULL DEFAULT '' ,
    "correction" TEXT   ,
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "id" TEXT NOT NULL  ,
    "inReplyTo" TEXT NOT NULL  ,
    "post" TEXT NOT NULL  ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "user" TEXT NOT NULL  ,
    PRIMARY KEY ("id"),FOREIGN KEY ("inReplyTo") REFERENCES "Repliable"("id") ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY ("user") REFERENCES "User"("id") ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY ("post") REFERENCES "Post"("id") ON DELETE RESTRICT ON UPDATE CASCADE
)

CREATE TABLE "quaint"."LineMarker" (
    "createdAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    "id" TEXT NOT NULL  ,
    "post" TEXT NOT NULL  ,
    "updatedAt" DATE NOT NULL DEFAULT '1970-01-01 00:00:00' ,
    PRIMARY KEY ("id"),FOREIGN KEY ("post") REFERENCES "Post"("id") ON DELETE RESTRICT ON UPDATE CASCADE
)

CREATE UNIQUE INDEX "quaint"."User.email" ON "User"("email")

CREATE UNIQUE INDEX "quaint"."User.username" ON "User"("username")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200310231817-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,58 @@
+datasource development {
+  provider = "sqlite"
+  url      = env("DB_URL")
+}
+
+generator photon {
+  provider = "prisma-client-js"
+}
+
+model Repliable {
+  id String @default(cuid()) @id
+}
+
+model Like {
+  id String @default(cuid()) @id
+  user User
+  repliable Repliable
+  createdAt DateTime  @default(now())
+}
+
+model User {
+  id                String  @default(cuid()) @id
+  email             String  @unique
+  username          String  @unique
+  fluentLanguages   String?
+  learningLanguages String?
+  timezone  String
+  createdAt DateTime  @default(now())
+  updatedAt DateTime  @updatedAt
+}
+
+model Post {
+  id        String  @default(cuid()) @id
+  published Boolean
+  language  String
+  content   String
+  user      User
+  createdAt DateTime  @default(now())
+  updatedAt DateTime  @updatedAt
+}
+
+model Tweet {
+  id        String  @default(cuid()) @id
+  content   String
+  correction String?
+  inReplyTo Repliable
+  user      User
+  post      Post
+  createdAt DateTime  @default(now())
+  updatedAt DateTime  @updatedAt
+}
+
+model LineMarker {
+  id        String  @default(cuid()) @id
+  post      Post
+  createdAt DateTime  @default(now())
+  updatedAt DateTime  @updatedAt
+}
```
